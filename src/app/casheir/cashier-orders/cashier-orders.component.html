<div class="orders-container mt-5">
    <h2 style="text-align: center; color: rgb(117, 108, 24);">Recent Orders</h2>
    <div *ngFor="let order of orders; let i = index" class="order-table-container">
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <h4 class="mt-5">Order {{ i + 1 }}</h4>
            <tr>
              <th>Invoice</th>
              <th>Purchase On</th>
              <th>Amount</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ order._id }}</td>
              <td>{{ order.createdAt | date: 'short' }}</td>
              <td>${{ order.totalAmount }}</td>
              <td [ngClass]="{
                'canceled': order.orderStatus === 'canceled',
                'delivered': order.orderStatus === 'delivered'
              }">
                {{ order.orderStatus }}
              </td>
              <td>
                <!-- Cancel button: disabled if order is canceled -->
                <button
                  (click)="cancelOrder(order)"
                  [disabled]="order.orderStatus === 'canceled'"
                  class="btn btn-danger btn-sm"
                >
                  Cancel
                </button>
  
                <!-- Update/OK button: disabled if order is canceled -->
                <button
                  (click)="toggleEdit(order)"
                  [disabled]="order.orderStatus === 'canceled'"
                  [class.btn-success]="!order.isEditing"
                  [class.btn-primary]="order.isEditing"
                  class="btn btn-sm"
                >
                  {{ order.isEditing ? 'OK' : 'Update' }}
                </button>
  
                <!-- Remove button: appears only if order is canceled -->
                <button
                  *ngIf="order.orderStatus === 'canceled'"
                  (click)="removeOrder(order)"
                  class="btn btn-warning btn-sm"
                >
                  Remove
                </button>
              </td>
              <!-- <td>
               
                <button (click)="cancelOrder(order)" class="btn btn-danger btn-sm">
                  Cancel
                </button>
  

                <button
                (click)="toggleEdit(order)"
                [class.btn-success]="!order.isEditing"
                [class.btn-primary]="order.isEditing"
                [disabled]="order.orderStatus === 'canceled'"
                class="btn btn-sm"
              >
                {{ order.isEditing ? 'OK' : 'Update' }}
              </button>
              </td> -->
            </tr>
            <tr>
              <th>Items</th>
              <td colspan="5">
                <div class="items-container">
                  <div class="item-card" *ngFor="let item of order.items; let idx = index">
                    <h5>{{ item.productId.name }}</h5>
                    <p><strong>Quantity:</strong> {{ item.quantity }}</p>
                    <p><strong>Price:</strong> ${{ item.productId.price }}</p>
                    <p><strong>Total:</strong> ${{ item.quantity * item.productId.price }}</p>
  
                    
                    <button
                      *ngIf="order.isEditing"
                      (click)="removeItem(order, idx)"
                      class="btn btn-warning btn-sm"
                    >
                      Remove
                    </button>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

